# Welcome to Astro SPA ðŸ‘‹

The Six UI frameworks supported by Astro for templating are primarily used for building SPA. But the application generated by Astro isn't an SPA. And, it's also not possible because Astro turns the component into plain HTML and ships zero JS!

But to enjoy the advantages of an SPA, I have written a tiny script for my personal project that can turn an Astro website into an SPA. It's not only just an SPA component/library but it comes with many other features also.

The complete list of features:

1. It prefetches the internal links using Intersection Observer for blazing-fast navigation
2. It upgrades from prefetch to fetch on mouseover and touchstart if the resource hasn't been prefetched already
3. It caches the prefetched resources using the Cache API
4. It intercepts when you click on an internal link and then it tries to serve the request from cache, if a cache isn't found, it fetches the requested page and replace the current documentElement with the new documentElement
5. Then it executes the scripts of the navigated page
6. It shows a fade-in animation when the new page loads
7. It dispatches a prefetch function and navigate function that can be used for prefetching and navigating programmatically
8. It has two lifecycle functions, onNavigate & onMount that can be called to add effects and execute code
9. It also works with popstate events (back/forward navigation)
10. It clears the entire cache on page load/reloads to ensure there's no stale content
11. If data saver is enabled (on mobile devices), it won't fetch or prefetch the pages

## Installing the plugin

Once you setup your Astro project simply run the following command:

```bash
# yarn
yarn add astro-spa

#npm
npm i astro-spa
```

You can then import the component like this:

```astro
---
import { Spa } from 'astro-spa'
// or import Spa from 'astro-spa/Spa.astro'
---
<Spa/>
```

And that's it, you're now ready to go!

## Demos

https://astro-spafy-component-demo.netlify.app/

https://ohka-bots-site-astro-ksoqn4flk7-j2q7uvclm-tc-001.vercel.app/ (Thanks to @Tc-001)

## Upcoming Features

- [ ] Configuration Options
- [ ] A new SPA component that utilizes the new AppHistory API (currently only available in Chrome Canary build)
- [ ] Containerization (Opt-in)
- [ ] You tell me? Create an issue with your wishes
